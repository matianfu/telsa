<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Telsa</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Telsa</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Telsa<span class="signature">(opts)</span><span class="type-signature"></span></h2>
        
            <div class="class-description"><p>Telsa extends node <code>stream.Duplex</code> to provide stream interface.</p>
<p>Internally, Telsa has four states:</p>
<ul>
<li>CONNECTING, socket connecting</li>
<li>HANDSHAKING, tls handshaking</li>
<li>ESTABLISHED, secure connection established</li>
<li>TERMINATED, fails to establish a connection, or the connection is ended.</li>
</ul>
<pre class="prettyprint source"><code>Either party may initiate a close by sending a close_notify alert.
Any data received after a closure alert is ignored.

Unless some other fatal alert has been transmitted, each party is
required to send a close_notify alert before closing the write side
of the connection. The other party MUST respond with a close_notify
alert of its own and close down the connection immediately,
discarding any pending writes. It is not required for the initiator
of the close to wait for the responding close_notify alert before
closing the read side of the connection.
</code></pre>
<p>The following methods or events are <em>external</em> events
in terms of a state machine.</p>
<ul>
<li><code>Duplex</code> inner-face methods:
<ul>
<li><code>_write</code></li>
<li><code>_final</code></li>
<li><code>_destroy</code></li>
<li><code>_read</code></li>
</ul>
</li>
<li>socket error or socket close (without a close_notify)</li>
<li>read path error when processing socket data, including:
<ul>
<li>tls protocol error, defined as alert description</li>
<li>operation errors returned from asynchronous operation
<ul>
<li>some errors are protocol error, such as certificate not verified</li>
<li>others are operation errors, such as child process crashed.</li>
</ul>
</li>
<li>exceptions</li>
</ul>
</li>
<li>server alert
<ul>
<li>fatal alert</li>
<li>close_notify</li>
<li>other warning alerts other than close_notify</li>
</ul>
</li>
</ul>
<p>In write path, there may be a pending write:</p>
<ul>
<li>in CONNECTING or HANDSHAKING state, a <code>_write</code> operation is blocked</li>
<li>in ESTABLISHED, a <code>_write</code> operation is waiting for a <code>drain</code> event
from the underlying socket before invoking callback function. This is
write side flow control.</li>
</ul>
<p>In read path, no extra resource is required for representing state.
If <code>readable.push</code> returns false, the socket is paused, until a <code>_read</code>
is called, where the socket is resumed. This is read side flow control.</p>
<p>All errors and alerts, as well as the <code>_final</code> and <code>_destroy</code> will
terminates the telsa within any states. There is a single method:
<code>terminate</code>, doing the heavy-lifing. Read the function document for
more detail.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Telsa"><span class="type-signature"></span>new Telsa<span class="signature">(opts)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>opts</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>port</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>server port</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>host</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>server domain name</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ca</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>root CA certificate in PEM format</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>cert</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>client certificate in PEM format</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>client private key in PEM format
or an asynchronous function that could sign data.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>validityCheckDate</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>
|

<span class="param-type">null</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>this parameter is passed
to forge pki.verifyCertificateChain. set <code>null</code> will skip validating
certificate's date.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>socket</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>for mocking socket in test</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line598">line 598</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="ca"><span class="type-signature"></span>ca<span class="type-signature"></span></h4>




<div class="description">
    <p>root ca certificate in forge format</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line609">line 609</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="caStore"><span class="type-signature"></span>caStore<span class="type-signature"></span></h4>




<div class="description">
    <p>ca store in forge format</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line612">line 612</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="cert"><span class="type-signature"></span>cert<span class="type-signature"> :<a href="global.html#ForgeCertificate">ForgeCertificate</a></span></h4>




<div class="description">
    <p>client cert in forge format</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#ForgeCertificate">ForgeCertificate</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line628">line 628</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="certAsn1"><span class="type-signature"></span>certAsn1<span class="type-signature"> :<a href="global.html#ForgeAsn1">ForgeAsn1</a></span></h4>




<div class="description">
    <p>client cert in forge asn1 format</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#ForgeAsn1">ForgeAsn1</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line634">line 634</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="certDer"><span class="type-signature"></span>certDer<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>client cert in DER format</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line640">line 640</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="certPem"><span class="type-signature"></span>certPem<span class="type-signature"> :string</span></h4>




<div class="description">
    <p>client cert in PEM format</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line622">line 622</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="cipher"><span class="type-signature"></span>cipher<span class="type-signature"> :<a href="global.html#CipherFunction">CipherFunction</a></span></h4>




<div class="description">
    <p>cipher function</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#CipherFunction">CipherFunction</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line739">line 739</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="clientRandom"><span class="type-signature"></span>clientRandom<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>client random (generated)</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line671">line 671</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="clientWriteKey"><span class="type-signature"></span>clientWriteKey<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>client write key</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line721">line 721</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="clientWriteMacKey"><span class="type-signature"></span>clientWriteMacKey<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>client write mac key</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line709">line 709</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="decipher"><span class="type-signature"></span>decipher<span class="type-signature"> :<a href="global.html#DecipherFunction">DecipherFunction</a></span></h4>




<div class="description">
    <p>decipher function</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#DecipherFunction">DecipherFunction</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line745">line 745</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="fragment"><span class="type-signature"></span>fragment<span class="type-signature"> :<a href="global.html#Fragment">Fragment</a>|null</span></h4>




<div class="description">
    <p>current fragment, contains 0, 1 or more records of
the same content type</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#Fragment">Fragment</a></span>
|

<span class="param-type">null</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line665">line 665</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="incomming"><span class="type-signature"></span>incomming<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>incomming data buffer, may contain fragmented records.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line658">line 658</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="masterSecret"><span class="type-signature"></span>masterSecret<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>master secret</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line703">line 703</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="msgs"><span class="type-signature"></span>msgs<span class="type-signature"> :Array.&lt;Buffer></span></h4>




<div class="description">
    <p>saved handshake messages for protocol</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Array.&lt;Buffer></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line733">line 733</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="opts"><span class="type-signature"></span>opts<span class="type-signature"></span></h4>




<div class="description">
    <p>options</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line602">line 602</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="preMasterSecret"><span class="type-signature"></span>preMasterSecret<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>pre-master secret</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line697">line 697</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="serverCertificates"><span class="type-signature"></span>serverCertificates<span class="type-signature"> :Array.&lt;<a href="global.html#ForgeCertificate">ForgeCertificate</a>></span></h4>




<div class="description">
    <p>server certificates received in server Certificate. Items
are stored in forge format in the order that the cert with
highest authority comes at last.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Array.&lt;<a href="global.html#ForgeCertificate">ForgeCertificate</a>></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line691">line 691</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="serverRandom"><span class="type-signature"></span>serverRandom<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>server random, received in ServerHello</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line683">line 683</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="serverWriteKey"><span class="type-signature"></span>serverWriteKey<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>server key</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line727">line 727</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="serverWriteMacKey"><span class="type-signature"></span>serverWriteMacKey<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>server write mac key</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line715">line 715</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="sessionId"><span class="type-signature"></span>sessionId<span class="type-signature"> :Buffer</span></h4>




<div class="description">
    <p>session id, received in ServerHello (not used anywhere)</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Buffer</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line677">line 677</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="socket"><span class="type-signature"></span>socket<span class="type-signature"> :net.Socket</span></h4>




<div class="description">
    <p>underlying connection</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">net.Socket</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line751">line 751</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="state"><span class="type-signature"></span>state<span class="type-signature"> :string</span></h4>




<div class="description">
    <p>internal state</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line775">line 775</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="writing"><span class="type-signature"></span>writing<span class="type-signature"> :object|null</span></h4>




<div class="description">
    <p>pending or draining <code>_write</code> operation</p>
<ul>
<li><code>null</code> if no pending or drain <code>_write</code></li>
<li><code>{ chunk, encoding, callback }</code> if a <code>_write</code> is pending in
<code>CONNECTING</code> or <code>HANDSHAKING</code> state</li>
<li><code>{ callback }</code> if the operation is waiting for draining in
<code>ESTABLISHED</code> state</li>
</ul>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">object</span>
|

<span class="param-type">null</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line652">line 652</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="_destroy"><span class="type-signature"></span>_destroy<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>implements <code>Duplex</code> interface method</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1645">line 1645</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="_final"><span class="type-signature"></span>_final<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>implement <code>Duplex</code> interface method</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1639">line 1639</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="_read"><span class="type-signature"></span>_read<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>implements <code>Duplex</code> interface method</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1651">line 1651</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="_write"><span class="type-signature"></span>_write<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>implements <code>Duplex</code> interface method</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1614">line 1614</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="assertLast"><span class="type-signature"></span>assertLast<span class="signature">(from, type)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>assert last handshake message in buffer</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>from</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>expected message sender</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>expected message type</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line954">line 954</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="changeCipherSpec"><span class="type-signature"></span>changeCipherSpec<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>send change cipher spec message and set cipher function</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1024">line 1024</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="clientVerifyData"><span class="type-signature"></span>clientVerifyData<span class="signature">()</span><span class="type-signature"> &rarr; {Buffer}</span></h4>
    

    



<div class="description">
    <p>generates client verify data in client Finished message</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1007">line 1007</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>client verify data</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Buffer</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="deriveKeys"><span class="type-signature"></span>deriveKeys<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>derive keys from pre-master secret, client and server random</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line978">line 978</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="handleAlert"><span class="type-signature"></span>handleAlert<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>handles server alert, throws TLSAlert for all fatal alert
and close_notify, other warnings are ignored</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1075">line 1075</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

    <div class="param-desc">
    
        
<span class="param-type"><a href="TLSAlert.html">TLSAlert</a></span>
|

<span class="param-type"><a href="TLSError.html">TLSError</a></span>


    
    </div>


    







        
            

    

    
    <h4 class="name" id="handleApplicationData"><span class="type-signature"></span>handleApplicationData<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>handles application data, pauses underlying socket if
upper layer (Duplex) buffer full.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>received application data</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1477">line 1477</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="handleCertificate"><span class="type-signature"></span>handleCertificate<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>verifies server certificates using forge.pki</p>
<pre class="prettyprint source"><code>struct {
  ASN.1Cert certificate_list&lt;0..2^24-1>;
} Certificate;
</code></pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>Certificate message body</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1278">line 1278</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

    <div class="param-desc">
    
        
<span class="param-type"><a href="TLSError.html">TLSError</a></span>


    
    </div>


    







        
            

    

    
    <h4 class="name" id="handleCertificateRequest"><span class="type-signature"></span>handleCertificateRequest<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <pre class="prettyprint source"><code>struct {
  ClientCertificateType certificate_types&lt;1..2^8-1>;
  SignatureAndHashAlgorithm
    supported_signature_algorithms&lt;2^16-1>;
  DistinguishedName certificate_authorities&lt;0..2^16-1>;
} CertificateRequest;
</code></pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>CertificateRequest message body</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1385">line 1385</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        <p>DECODE_ERROR</p>
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><a href="TLSError.html">TLSError</a></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







        
            

    

    
    <h4 class="name" id="handleChangeCipherSpec"><span class="type-signature"></span>handleChangeCipherSpec<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>validates ChangeCipherSpec message and set decipher</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>ChangeCipherSpec message body</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1461">line 1461</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="handleError"><span class="type-signature"></span>handleError<span class="signature">(e)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>handle errors from data handler, asynchronous operations,
but not socket error.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">Error</span>


            
            </td>

            

            

            <td class="description last"><p>TLSError, TLSAlert, and other Error.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line783">line 783</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="handleHandshakeMessage"><span class="type-signature"></span>handleHandshakeMessage<span class="signature">(msg)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>handles handshake message according to protocol.</p>
<ul>
<li>enforcing state and sequence, throw UNEXPECTED_MESSAGE if violated</li>
<li>save message to buffer</li>
<li>sign ClientVerify asynchonously</li>
<li>change to ESTABLISHED state if handshake succeeded</li>
<li>HELLO_REQUEST is ignored</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>full message data, including type, length, and body</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1101">line 1101</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="handleServerFinished"><span class="type-signature"></span>handleServerFinished<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>handles server Finished message. compares server <code>verify_data</code></p>
<pre class="prettyprint source"><code>struct {
  opaque verify_data[verify_data_length];
} Finished;
</code></pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1449">line 1449</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        <p>DECRYPT_ERROR if verification fails.</p>
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">TLSERROR</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







        
            

    

    
    <h4 class="name" id="handleServerHello"><span class="type-signature"></span>handleServerHello<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>parses ServerHello message</p>
<ul>
<li>saves sessionId and server random</li>
<li>verifies protocol version, cipher suite, compression method
and extensions</li>
</ul>
<pre class="prettyprint source"><code>struct {
  ProtocolVersion server_version;
  Random random;
  SessionID session_id;
  CipherSuite cipher_suite;
  CompressionMethod compression_method;
  select (extensions_present) {
    case false:
      struct {};
    case true:
      Extension extensions&lt;0..2^16-1>;
  };
} ServerHello;
</code></pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>ServerHello message body</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1221">line 1221</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        <p>DECODE_ERROR or ILLEGAL_PARAMETER</p>
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><a href="TLSError.html">TLSError</a></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







        
            

    

    
    <h4 class="name" id="handleServerHelloDone"><span class="type-signature"></span>handleServerHelloDone<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>handles ServerHelloDone message</p>
<pre class="prettyprint source"><code>struct { } ServerHelloDone;
</code></pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>ServerHelloDone message body (empty)</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1430">line 1430</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        <p>ILLEGAL_PARAMETER</p>
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><a href="TLSError.html">TLSError</a></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







        
            

    

    
    <h4 class="name" id="handleSocketData"><span class="type-signature"></span>handleSocketData<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>handles socket data, decodes record content
and dispatches data to corresponding handlers</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>socket data</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1037">line 1037</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        <p>DECODE_ERROR</p>
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><a href="TLSError.html">TLSError</a></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







        
            

    

    
    <h4 class="name" id="maxFragmentLength"><span class="type-signature"></span>maxFragmentLength<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line794">line 794</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>max fragment length defined in record protocol</p>
</div>



    





        
            

    

    
    <h4 class="name" id="readFragment"><span class="type-signature"></span>readFragment<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="global.html#Fragment">Fragment</a>}</span></h4>
    

    



<div class="description">
    <p>read a record out of incomming data buffer</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line806">line 806</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>the record type and content (buffer)</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Fragment">Fragment</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="readMessage"><span class="type-signature"></span>readMessage<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="global.html#Message">Message</a>|undefined}</span></h4>
    

    



<div class="description">
    <p>reads a message from both current fragment and
incomming data buffer. If no message available,
it returns <code>undefined</code>.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line916">line 916</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Message">Message</a></span>
|

<span class="param-type">undefined</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="readMessageFromFragment"><span class="type-signature"></span>readMessageFromFragment<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="global.html#Message">Message</a>}</span></h4>
    

    



<div class="description">
    <p>reads a message from current fragment</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line887">line 887</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Message">Message</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="saveMessage"><span class="type-signature"></span>saveMessage<span class="signature">(from)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>save a handshake message to message buffer</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>from</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>either <code>server</code> or <code>client</code></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line941">line 941</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="send"><span class="type-signature"></span>send<span class="signature">(type, data)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    <p>constructs a record layer packet and send via socket</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>content type</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>content, the max size should not exceeds 2^14 bytes</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1489">line 1489</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>false if socket buffer full</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="sendAlert"><span class="type-signature"></span>sendAlert<span class="signature">(level)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    <p>send alert to server</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>level</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>alert level</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1502">line 1502</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>false if buffer full</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="sendApplicationData"><span class="type-signature"></span>sendApplicationData<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    <p>send application data. This function split data into chunks
if tls record size limit is exceeded.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1600">line 1600</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>false if buffer full</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="sendCertificate"><span class="type-signature"></span>sendCertificate<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>send client Certificate handshake message</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1544">line 1544</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendCertificateVerify"><span class="type-signature"></span>sendCertificateVerify<span class="signature">(sig)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>send CertificateVerify handshake message</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sig</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>handshake message bundle signature</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1582">line 1582</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendChangeCipherSpec"><span class="type-signature"></span>sendChangeCipherSpec<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    <p>send ChangeCipherSpec to server</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1510">line 1510</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>false if buffer full</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="sendClientHello"><span class="type-signature"></span>sendClientHello<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>send ClientHello handshake message</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1531">line 1531</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendClientKeyExchange"><span class="type-signature"></span>sendClientKeyExchange<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>send ClientKeyExchange handshake message</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1552">line 1552</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendFinished"><span class="type-signature"></span>sendFinished<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>send Finished handshake message</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1590">line 1590</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendHandshakeMessage"><span class="type-signature"></span>sendHandshakeMessage<span class="signature">(type, data)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    <p>send handshake message, the message is also pushed to message buffer</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>handshake message type</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>


            
            </td>

            

            

            <td class="description last"><p>handshake message body</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1521">line 1521</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>false if buffer full</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="serverVerifyData"><span class="type-signature"></span>serverVerifyData<span class="signature">()</span><span class="type-signature"> &rarr; {Buffer}</span></h4>
    

    



<div class="description">
    <p>generates server verify data in server Finsihed message</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1016">line 1016</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>server verify data</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Buffer</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setServerRandom"><span class="type-signature"></span>setServerRandom<span class="signature">(random)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>set server random and derives keys</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>random</code></td>
            

            <td class="type">
            
                
<span class="param-type">buffer</span>


            
            </td>

            

            

            <td class="description last"><p>server random</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line998">line 998</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="shiftFragment"><span class="type-signature"></span>shiftFragment<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="global.html#Fragment">Fragment</a>}</span></h4>
    

    



<div class="description">
    <p>shift data chunk with given size from current fragment</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line865">line 865</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Fragment">Fragment</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="sign"><span class="type-signature"></span>sign<span class="signature">(callback)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>signs handshake message bundle asynchronously</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><code>(err, sig) =&gt; {}</code></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1564">line 1564</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="terminate"><span class="type-signature"></span>terminate<span class="signature">(reason, err<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>terminate is the one-for-all method to end the telsa.
unlike node tls, telsa terminates synchronously, which means
that there is no closing state. This is allowed in TLS spec.</p>
<ul>
<li>final</li>
<li>destroy</li>
<li>socket, [err]</li>
<li>error, TLSError | Error</li>
<li>alert, TLSAlert</li>
<li>(close_notify) redefined from alert</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>reason</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>err</code></td>
            

            <td class="type">
            
                
<span class="param-type">Error</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="telsa.js.html">telsa.js</a>, <a href="telsa.js.html#line1672">line 1672</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Telsa.html">Telsa</a></li><li><a href="TLSAlert.html">TLSAlert</a></li><li><a href="TLSError.html">TLSError</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AES_128_CBC_SHA">AES_128_CBC_SHA</a></li><li><a href="global.html#AlertDescription">AlertDescription</a></li><li><a href="global.html#alertDescription">alertDescription</a></li><li><a href="global.html#alertLevel">alertLevel</a></li><li><a href="global.html#AlertLevel">AlertLevel</a></li><li><a href="global.html#contentType">contentType</a></li><li><a href="global.html#ContentType">ContentType</a></li><li><a href="global.html#createCipher">createCipher</a></li><li><a href="global.html#createDecipher">createDecipher</a></li><li><a href="global.html#createSequenceNumber">createSequenceNumber</a></li><li><a href="global.html#handshakeType">handshakeType</a></li><li><a href="global.html#HandshakeType">HandshakeType</a></li><li><a href="global.html#HMAC1">HMAC1</a></li><li><a href="global.html#HMAC256">HMAC256</a></li><li><a href="global.html#K">K</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#logM">logM</a></li><li><a href="global.html#prepend16">prepend16</a></li><li><a href="global.html#prepend24">prepend24</a></li><li><a href="global.html#PRF256">PRF256</a></li><li><a href="global.html#readUInt24">readUInt24</a></li><li><a href="global.html#RSA_PKCS1_PADDING">RSA_PKCS1_PADDING</a></li><li><a href="global.html#RSA_PKCS1_SHA256">RSA_PKCS1_SHA256</a></li><li><a href="global.html#SHA256">SHA256</a></li><li><a href="global.html#VER12">VER12</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Nov 19 2019 21:01:38 GMT+0800 (China Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>